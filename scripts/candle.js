var Candle=function(){this._about="This project is based on candle.js",this.setCanvas({}),this._entities=[],this._images=[],this._sounds=[],this._imageFiles=["sky1.jpg"],this._imageFoler="images/",this._scriptFolder="scripts/",this._scriptFiles=["input.js","loop.js","entity.js","plane.js","sky.js","camera.js"]};Candle.prototype={get scriptSrcs(){var t=this,e=$.map(this._scriptFiles,function(e){return t._scriptFolder+e});return e},get imageFolder(){return this._imageFoler},get imageFiles(){return this._imageFiles},get imageSrcs(){var t=this,e=$.map(this._imageFiles,function(e){return t._imageFoler+e});return e},get canvas(){return this._canvas},get images(){return this._images},get ctx(){return this._ctx}},Candle.prototype.setCanvas=function(t){this._canvas=document.getElementById(t.id||"display"),this._canvas.width=t.width||640,this._canvas.height=t.height||480,this._canvas.style.display="block",this._canvas.style.margin="auto",this._canvas.style.background="#f0f0f0",this._ctx=this._canvas.getContext("2d")},Candle.prototype.about=function(){console.log(this._about)},Candle.prototype.init=function(t){this._scripts.push.apply(this._scripts,t)},Candle.prototype.loadScripts=function(t,e){var n=0,i=function(){++n===t.length&&e()};t.forEach(function(t){loadJS(t,i)})},Candle.prototype.loadImages=function(t,e,n){for(var i=e.length,s=function(){i--,0===i&&n()},a=0;a<e.length;a++){var o=new Image,c=e[a];this._images[c]=o,o.onload=s,o.src=t+c}},Candle.prototype.load=function(){var t=this;t.about(),t.loadScripts(t.scriptSrcs,function(){t.loadImages(t.imageFolder,t.imageFiles,function(){t.wolf3d()})})},Candle.prototype.wolf3d=function(){var t=new Input,e=new Loop,n=new Entity;n.control=function(){var e=t.states,n=.1*(e.forward-e.backward),i=.002*(e.right-e.left);this.setOmega(i),this.setSpeed(n)};var i=this.canvas,s=new Sky(i,this.images["sky1.jpg"]),a=new Plane(32),o=new Camera(i,n,a);e.start(function(t){n.control(),n.motion(t),s.render(t,n.theta,i.height/2),o.render(t)})};