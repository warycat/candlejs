var Camera=function(t,e,n,i){this._canvas=t,this._ctx=t.getContext("2d"),this._width=t.width,this._height=t.height,this._ppc=e,this._resolution=Math.floor(this._width/this._ppc),this._range=n,this._focus=i,this._columns=[],this._rays=[]};Camera.prototype={get canvas(){return this._canvas},get ctx(){return this._ctx},get width(){return this._width},get height(){return this._height},get ppc(){return this._ppc},get resolution(){return this._resolution},get range(){return this._range},get focus(){return this._focus},get columns(){return this._columns},get rays(){return this._rays}},Camera.prototype.render=function(){},Camera.prototype.castRays=function(t,e){for(var n=0;n<this.resolution;n++){var i=n/this.resolution-.5,o=Math.atan2(i,this.focus),r=this.castRay(t.position,t.theta+o,e);this.rays[n]=r,console.log(r)}},Camera.prototype.castRay=function(t,e,n){var i=Math.sin(e),o=Math.cos(e),r=this,c=function(t,e,n,i,o){if(0===e)return{length2:1/0};var r=e>0?Math.floor(n+1)-n:Math.ceil(n-1)-n,c=r*(t/e);return{x:o?i+c:n+r,y:o?n+r:i+c,length2:r*r+c*c}},h=function(t,e,r,c,h){var s=0>o?e:0,a=0>i?r:0;return t.height=n.getGrid(Math.floor(t.x-s),Math.floor(t.y-a)),t.distance=c+Math.sqrt(t.length2),t.shading=e?0>o?2:0:0>i?2:1,t.offset=h-Math.floor(h),t},s=function(t){var e=c(i,o,t.x,t.y,!1),n=c(o,i,t.y,t.x,!0),a=e.length2<n.length2?h(e,1,0,t.distance,e.y):h(n,0,1,t.distance,n.x);return a.distance>r.range?[t]:[t].concat(s(a))},a={x:t.x,y:t.y,height:0,distance:0};return s(a)};