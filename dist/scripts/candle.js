var Candle=function(){this._about="This project is based on candle.js",this.setCanvas({}),this._entities=[],this._images=[],this._jsons=[],this._sounds=[],this._imageFiles=["sky1.jpg","wall_texture.jpg","tiles.png"],this._imageFoler="images/",this._jsonFiles=["levels.json","Wolf00.json"],this._jsonFolder="jsons/",this._scriptFiles=["input.js","loop.js","entity.js","level.js","plane.js","sky.js","camera.js","player.js"],this._scriptFolder="scripts/"};Candle.prototype={get scriptSrcs(){var t=this,e=$.map(this._scriptFiles,function(e){return t._scriptFolder+e});return e},get imageFolder(){return this._imageFoler},get imageFiles(){return this._imageFiles},get jsonFiles(){return this._jsonFiles},get jsonFolder(){return this._jsonFolder},get imageSrcs(){var t=this,e=$.map(this._imageFiles,function(e){return t._imageFoler+e});return e},get canvas(){return this._canvas},get images(){return this._images},get jsons(){return this._jsons},get ctx(){return this._ctx}},Candle.prototype.setCanvas=function(t){this._canvas=document.getElementById(t.id||"display"),this._canvas.width=t.width||640,this._canvas.height=t.height||480,this._canvas.style.display="block",this._canvas.style.margin="auto",this._canvas.style.background="#f0f0f0",this._ctx=this._canvas.getContext("2d")},Candle.prototype.about=function(){console.log(this._about)},Candle.prototype.init=function(t){this._scripts.push.apply(this._scripts,t)},Candle.prototype.loadScripts=function(t,e){var n=0,s=function(){++n===t.length&&e()};t.forEach(function(t){loadJS(t,s)})},Candle.prototype.loadImages=function(t,e,n){for(var s=e.length,i=function(){s--,0===s&&n()},o=0;o<e.length;o++){var a=new Image,c=e[o];this._images[c]=a,a.onload=i,a.src=t+c}},Candle.prototype.loadJsons=function(t,e,n){for(var s=e.length,i=this,o=function(){i._jsons[this.fileName]=JSON.parse(this.responseText),s--,0===s&&n()},a=0;a<e.length;a++){var c=e[a],r=t+c,l=new XMLHttpRequest;l.fileName=c,l.onload=o,l.open("GET",r),l.send()}},Candle.prototype.load=function(){var t=this;t.about(),t.loadScripts(t.scriptSrcs,function(){t.loadImages(t.imageFolder,t.imageFiles,function(){t.loadJsons(t.jsonFolder,t.jsonFiles,function(){t.wolf3d()})})})},Candle.prototype.wolf3d=function(){var t=this.jsons["Wolf00.json"],e=new Input,n=new Loop,s=new Player("larry");s.control=function(){var t=e.states,n=.005*(t.up-t.down),s=.002*(t.right-t.left);this.setOmega(s),this.setSpeed(n)};var i=this.canvas,o=new Plane(i,t.ceiling,t.floor,64,this.images["tiles.png"],t.grids),a=new Camera(i,8,32,.8,o);s.bindActionKey("space",1e3,function(){}),n.start(function(t){s.control(),s.motion(t),s.onActionKey("space",e.states.space,t),o.render(),a.castRays(s,o),a.render(t)})};